{# templates/public/missing_search.html #}
{% extends "base.html" %}

{% block title %}손길 - 실종자 조회{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/missing-search.css') }}">
<!-- React -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<!-- GSAP ScrollTrigger -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
{% endblock %}

{% block content %}
<!-- 검색 헤더 섹션 -->
<section class="search-header">
    <div class="container">
        <div class="search-title">
            <h1><i class="fas fa-search"></i> 실종자 조회</h1>
            <p>실종자 정보를 검색하고 목격 정보를 제보해주세요</p>
        </div>
        
        <!-- 검색 및 필터 -->
        <div class="search-controls">
            <div class="search-bar">
                <div class="search-input-group">
                    <input type="text" id="searchInput" placeholder="이름, 특징, 지역으로 검색하세요" class="search-input">
                    <div class="search-status">검색 중...</div>
                    <button class="search-btn" onclick="performSearch()">
                        <i class="fas fa-search"></i>
                        검색
                    </button>
                </div>
            </div>
            
            <div class="filter-controls">
                <div class="filter-group">
                    <label>정렬:</label>
                    <select id="sortSelect">
                        <option value="danger">위험도순</option>
                        <option value="up">UP순</option>
                        <option value="recent">최신순</option>
                        <option value="old">오래된순</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>지역:</label>
                    <select id="regionSelect">
                        <option value="">전체 지역</option>
                        <option value="seoul">서울특별시</option>
                        <option value="busan">부산광역시</option>
                        <option value="daegu">대구광역시</option>
                        <option value="incheon">인천광역시</option>
                        <option value="gwangju">광주광역시</option>
                        <option value="daejeon">대전광역시</option>
                        <option value="ulsan">울산광역시</option>
                        <option value="gyeonggi">경기도</option>
                        <option value="gangwon">강원도</option>
                        <option value="chungbuk">충청북도</option>
                        <option value="chungnam">충청남도</option>
                        <option value="jeonbuk">전라북도</option>
                        <option value="jeonnam">전라남도</option>
                        <option value="gyeongbuk">경상북도</option>
                        <option value="gyeongnam">경상남도</option>
                        <option value="jeju">제주특별자치도</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>연령대:</label>
                    <select id="ageSelect">
                        <option value="">전체 연령</option>
                        <option value="child">어린이 (0-12세)</option>
                        <option value="teen">청소년 (13-19세)</option>
                        <option value="adult">성인 (20-64세)</option>
                        <option value="senior">고령자 (65세 이상)</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>실종기간:</label>
                    <select id="periodSelect">
                        <option value="">전체 기간</option>
                        <option value="today">오늘</option>
                        <option value="week">최근 1주일</option>
                        <option value="month">최근 1개월</option>
                        <option value="3month">최근 3개월</option>
                        <option value="year">최근 1년</option>
                    </select>
                </div>
                
                <button class="filter-reset-btn">
                    <i class="fas fa-undo"></i>
                    초기화
                </button>
            </div>
        </div>
        
        <!-- 검색 결과 정보 -->
        <div class="search-results-info">
            <div class="results-count">
                총 <span id="totalCount">127</span>건의 실종자 정보가 있습니다
            </div>
            <div class="view-toggle">
                <button class="view-btn active" data-view="grid">
                    <i class="fas fa-th"></i>
                </button>
                <button class="view-btn" data-view="list">
                    <i class="fas fa-list"></i>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- 실종자 목록 섹션 -->
<section class="missing-list">
    <div class="container">
        <!-- 그리드 뷰 -->
        <div class="missing-grid" id="missingGrid">
            <!-- React 컴포넌트가 여기에 렌더링됩니다 -->
        </div>
        
        <!-- 리스트 뷰 -->
        <div class="missing-list-view" id="missingList">
            <!-- React 컴포넌트가 여기에 렌더링됩니다 -->
        </div>
        
        <!-- 로딩 인디케이터 -->
        <div class="loading-indicator" id="loadingIndicator">
            <i class="fas fa-spinner fa-spin"></i>
            <span>실종자 정보를 불러오는 중...</span>
        </div>
        
        <!-- 결과 없음 메시지 -->
        <div class="no-results" id="noResults">
            <i class="fas fa-search"></i>
            <h3>검색 결과가 없습니다</h3>
            <p>다른 검색어나 필터 조건을 시도해보세요</p>
        </div>
        
        <!-- 페이지네이션 -->
        <div class="pagination" id="pagination">
            <button class="page-btn prev" onclick="changePage(-1)">
                <i class="fas fa-chevron-left"></i>
                이전
            </button>
            <div class="page-numbers">
                <button class="page-num active" onclick="goToPage(1)">1</button>
                <button class="page-num" onclick="goToPage(2)">2</button>
                <button class="page-num" onclick="goToPage(3)">3</button>
                <span class="page-dots">...</span>
                <button class="page-num" onclick="goToPage(12)">12</button>
            </div>
            <button class="page-btn next" onclick="changePage(1)">
                다음
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>
</section>

<!-- 긴급 신고 플로팅 버튼 -->
<div class="floating-report-btns">
    <a href="{{ url_for('missing_report') }}" class="floating-btn main-btn" title="실종자 신고">
        <i class="fas fa-plus"></i>
    </a>
    <div class="floating-sub-btns">
        <a href="{{ url_for('missing_report') }}" class="floating-btn sub-btn" title="실종자 신고">
            <i class="fas fa-user-plus"></i>
            <span>신고</span>
        </a>
        <a href="tel:112" class="floating-btn sub-btn emergency" title="긴급신고 112">
            <i class="fas fa-phone"></i>
            <span>112</span>
        </a>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/missing-search.js') }}"></script>
{% endblock %}